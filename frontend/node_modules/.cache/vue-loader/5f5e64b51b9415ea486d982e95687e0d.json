{"remainingRequest":"/workspace/hw4-msa-capstone-project/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace/hw4-msa-capstone-project/frontend/src/components/Delivery.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace/hw4-msa-capstone-project/frontend/src/components/Delivery.vue","mtime":1658726552148},{"path":"/workspace/hw4-msa-capstone-project/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1658727352816},{"path":"/workspace/hw4-msa-capstone-project/frontend/node_modules/babel-loader/lib/index.js","mtime":1658727353284},{"path":"/workspace/hw4-msa-capstone-project/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1658727352816},{"path":"/workspace/hw4-msa-capstone-project/frontend/node_modules/vue-loader/lib/index.js","mtime":1658727353720}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBjb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJykuZGVmYXVsdDsKCgogICAgZXhwb3J0IGRlZmF1bHQgewogICAgICAgIG5hbWU6ICdEZWxpdmVyeScsCiAgICAgICAgY29tcG9uZW50czp7CiAgICAgICAgfSwKICAgICAgICBwcm9wczogewogICAgICAgICAgICB2YWx1ZTogW09iamVjdCwgU3RyaW5nLCBOdW1iZXIsIEJvb2xlYW4sIEFycmF5XSwKICAgICAgICAgICAgZWRpdE1vZGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGlzTmV3OiBCb29sZWFuLAogICAgICAgICAgICBvZmZsaW5lOiBCb29sZWFuLAogICAgICAgICAgICBjaGlsZFBhdGg6IFN0cmluZywKICAgICAgICB9LAogICAgICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgICAgIHNuYWNrYmFyOiB7CiAgICAgICAgICAgICAgICBzdGF0dXM6IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZW91dDogNTAwMCwKICAgICAgICAgICAgICAgIHRleHQ6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgfSksCiAgICAgICAgY3JlYXRlZCgpewogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICBzZWxlY3RGaWxlKCl7CiAgICAgICAgICAgIGlmKHRoaXMuZWRpdE1vZGUgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcwogICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSAiZmlsZSI7CiAgICAgICAgICAgICAgICBpbnB1dC5hY2NlcHQgPSAiaW1hZ2UvKiI7CiAgICAgICAgICAgICAgICBpbnB1dC5pZCA9ICJ1cGxvYWRJbnB1dCI7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlucHV0LmNsaWNrKCk7CiAgICAgICAgICAgICAgICBpbnB1dC5vbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZWFkZXIucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICBtZS5pbWFnZVVybCA9IHJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAgICAgbWUudmFsdWUucGhvdG8gPSByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoIGZpbGUgKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVkaXQoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2RlID0gdHJ1ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmMgc2F2ZSgpewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLm9mZmxpbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pc05ldykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jaGlsZFBhdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gYXdhaXQgYXhpb3MucG9zdChheGlvcy5maXhVcmwoJy8nK3RoaXMuY2hpbGRQYXRoKSwgdGhpcy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGF3YWl0IGF4aW9zLnBvc3QoYXhpb3MuZml4VXJsKCcvZGVsaXZlcmllcycpLCB0aGlzLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGF3YWl0IGF4aW9zLnB1dChheGlvcy5maXhVcmwodGhpcy52YWx1ZS5fbGlua3Muc2VsZi5ocmVmKSwgdGhpcy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy52YWx1ZSE9bnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGsgaW4gdGVtcC5kYXRhKSB0aGlzLnZhbHVlW2tdPXRlbXAuZGF0YVtrXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGVtcC5kYXRhOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy52YWx1ZSk7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTmV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2FkZCcsIHRoaXMudmFsdWUpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2VkaXQnLCB0aGlzLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpCgogICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbmFja2Jhci5zdGF0dXMgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbmFja2Jhci50ZXh0ID0gZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jIHJlbW92ZSgpewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMub2ZmbGluZSkgewogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5kZWxldGUoYXhpb3MuZml4VXJsKHRoaXMudmFsdWUuX2xpbmtzLnNlbGYuaHJlZikpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2RlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RlbGV0ZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMudmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2RlbGV0ZScsIHRoaXMudmFsdWUpOwoKICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc25hY2tiYXIuc3RhdHVzID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIHRoaXMuc25hY2tiYXIudGV4dCA9IGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2hhbmdlKCl7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMudmFsdWUpOwogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICB9Cg=="},{"version":3,"sources":["Delivery.vue"],"names":[],"mappings":";AAkFA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Delivery.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    <v-card style=\"width:450px;\" outlined>\n        <template slot=\"progress\">\n            <v-progress-linear\n                    color=\"deep-purple\"\n                    height=\"10\"\n                    indeterminate\n            ></v-progress-linear>\n        </template>\n\n        <v-card-title v-if=\"value._links\">\n            Delivery # {{value._links.self.href.split(\"/\")[value._links.self.href.split(\"/\").length - 1]}}\n        </v-card-title >\n        <v-card-title v-else>\n            Delivery\n        </v-card-title >\n\n        <v-card-text>\n            <String label=\"OrderStatus\" v-model=\"value.orderStatus\" :editMode=\"editMode\"/>\n            <String label=\"OrderAddress\" v-model=\"value.orderAddress\" :editMode=\"editMode\"/>\n            <String label=\"ShopAddress\" v-model=\"value.shopAddress\" :editMode=\"editMode\"/>\n            <String label=\"DeliveryStatus\" v-model=\"value.deliveryStatus\" :editMode=\"editMode\"/>\n            <String label=\"DeliveryStatus\" v-model=\"value.deliveryStatus\" :editMode=\"editMode\"/>\n\n        </v-card-text>\n\n        <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n                    color=\"deep-purple lighten-2\"\n                    text\n                    @click=\"edit\"\n                    v-if=\"!editMode\"\n            >\n                Edit\n            </v-btn>\n            <v-btn\n                    color=\"deep-purple lighten-2\"\n                    text\n                    @click=\"save\"\n                    v-else\n            >\n                Save\n            </v-btn>\n            <v-btn\n                    color=\"deep-purple lighten-2\"\n                    text\n                    @click=\"remove\"\n                    v-if=\"!editMode\"\n            >\n                Delete\n            </v-btn>\n            <v-btn\n                    color=\"deep-purple lighten-2\"\n                    text\n                    @click=\"editMode = false\"\n                    v-if=\"editMode && !isNew\"\n            >\n                Cancel\n            </v-btn>\n        </v-card-actions>\n        <v-card-actions>\n            <v-spacer></v-spacer>                        \n        </v-card-actions>\n\n        <v-snackbar\n                v-model=\"snackbar.status\"\n                :top=\"true\"\n                :timeout=\"snackbar.timeout\"\n                color=\"error\"\n        >\n            {{ snackbar.text }}\n            <v-btn dark text @click=\"snackbar.status = false\">\n                Close\n            </v-btn>\n        </v-snackbar>\n    </v-card>\n\n</template>\n\n<script>\n    const axios = require('axios').default;\n\n\n    export default {\n        name: 'Delivery',\n        components:{\n        },\n        props: {\n            value: [Object, String, Number, Boolean, Array],\n            editMode: Boolean,\n            isNew: Boolean,\n            offline: Boolean,\n            childPath: String,\n        },\n        data: () => ({\n            snackbar: {\n                status: false,\n                timeout: 5000,\n                text: ''\n            },\n        }),\n        created(){\n        },\n        methods: {\n            selectFile(){\n            if(this.editMode == false) {\n                return false;\n            }\n                var me = this\n                var input = document.createElement(\"input\");\n                input.type = \"file\";\n                input.accept = \"image/*\";\n                input.id = \"uploadInput\";\n                \n                input.click();\n                input.onchange = function (event) {\n                    var file = event.target.files[0]\n                    var reader = new FileReader();\n\n                    reader.onload = function () {\n                        var result = reader.result;\n                        me.imageUrl = result;\n                        me.value.photo = result;\n                        \n                    };\n                    reader.readAsDataURL( file );\n                };\n            },\n            edit() {\n                this.editMode = true;\n            },\n            async save(){\n                try {\n                    var temp = null;\n\n                    if(!this.offline) {\n                        if(this.isNew) {\n                            if(this.childPath) {\n                                temp = await axios.post(axios.fixUrl('/'+this.childPath), this.value)\n                            } else {\n                                temp = await axios.post(axios.fixUrl('/deliveries'), this.value)\n                            }\n                        } else {\n                            temp = await axios.put(axios.fixUrl(this.value._links.self.href), this.value)\n                        }\n                    }\n\n                    if(this.value!=null) {\n                        for(var k in temp.data) this.value[k]=temp.data[k];\n                    } else {\n                        this.value = temp.data;\n                    }\n\n                    this.editMode = false;\n                    this.$emit('input', this.value);\n\n                    if (this.isNew) {\n                        this.$emit('add', this.value);\n                    } else {\n                        this.$emit('edit', this.value);\n                    }\n\n                    location.reload()\n\n                } catch(e) {\n                    this.snackbar.status = true\n                    this.snackbar.text = e\n                }\n                \n            },\n            async remove(){\n                try {\n                    if (!this.offline) {\n                        await axios.delete(axios.fixUrl(this.value._links.self.href))\n                    }\n\n                    this.editMode = false;\n                    this.isDeleted = true;\n\n                    this.$emit('input', this.value);\n                    this.$emit('delete', this.value);\n\n                } catch(e) {\n                    this.snackbar.status = true\n                    this.snackbar.text = e\n                }\n            },\n            change(){\n                this.$emit('input', this.value);\n            },\n        },\n    }\n</script>\n\n"]}]}